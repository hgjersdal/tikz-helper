%%% AUTO GENERATED CODE
\documentclass{article}
\usepackage{standalone}
\ifx\HCode\UnDef\else\def\pgfsysdriver{pgfsys-tex4ht.def}\fi
\usepackage[usenames,dvipsnames,svgnames,table]{xcolor}
\usepackage[utf8]{inputenc}
\usepackage[]{textcomp}
\usepackage{tikz}
\usepackage{color}
\usepackage{siunitx}
\usetikzlibrary{arrows,shapes}
\usetikzlibrary{decorations.markings}
\usepackage{float}
\usepackage[singlelinecheck=off]{caption}
\begin{document}
\section{Introduction}


tikz-helper is a set of common lisp functions and macros to make plots. This is done by 
generating \LaTeX \ code using pgf and {Ti\textit{k}Z}.



To generate a plot, one of the macros with-tikz-to-file, with-tikz-to-string or with-tikz-to-stream is called.
with-tikz-to-file and with-tikz-to-string are just wrappers for with-tikz-to-stream.
The macros set up the latex environment needed by the figures, collects information needed to perform
transformations between the data frame and a default frame, and draws axis for the plot. The transformations are
linear and works so that (plot-x-min,plot-y-min) is at (0cm,0cm) in the default frame, and  (plot-x-max,plot-x-min) is at (width in cm, height in cm)



The axis-style should be one of :rectangle :cross :left-bottom :popped-out or :none.
Examples of all the different axis styles are below. Axis ticks are added to the axis. The position of the ticks is so
that they are placed with a spacing of 1,2 or 5 times 10 to a power such that you get between 4 and 10 ticks on the
axis. If custom ticks are needed, or ticks with names, not numbers, use :none, and call the corresponding draw-axis-*
function.

\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/transform-and-clip.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{By default paths and nodes are drawn in a frame where origin is the lower left corner of the plot,
and the units in x and y is 1cm. The transform macro generates tikz transformations, so that all points
within the scope are drawn in the plot frame, defined by plot- x-min x-max and y-min y-max.
 The clip-and-transform macro also clips the plotting area. Values with units like cm or pt are not scaled, 
but all points are translated. The black star path is here drawn in the current frame, the red one 
is shifted by (0.1,0.1) in the current frame, then drawn in units of cm.}
\end{figure}
\section{Simple plots}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/plots.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{A histogram, a function and some data points. Most functions 
dealing with sets of data points call the clip-and-transform macro themselves, so calling it from 
top level is not necessary.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/test-styles.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Different styles of lines and nodes. The styles are just regular tikz options.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/bubbles.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Data points of varying sizes, shapes and colors. Draw node does not automatically transform, 
since it can be useful in the default frame.}
\end{figure}


The with-tikz-to-string macro is nice for mixing text and drawings(like so \begin{tikzpicture}[]
\node at (0.0,0.0) [draw=black,fill=gray,star,inner sep=0.0cm,minimum width =0.3cm,minimum height=0.3cm] {};
\end{tikzpicture}
). It's possible to draw stuff in captions
by including the following:.
\begin{verbatim}
%The preamble needs:
\usepackage[singlelinecheck=off]{caption}
%Inside the figure environment
\captionsetup{singlelinecheck=off}
\caption[foo bar]{\node at (0,0) ...}
\end{verbatim}

\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/test-histo2.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Some Gaussian histograms with different styles and with legend entries. 
The legend entries are placed in the default cm frame, unless draw-histogram 
is called within (transform (tikz) ...). With some trickery it is also possible to get 
legends in captions: \begin{tikzpicture}[]
\begin{scope}[draw=gray,fill=blue!50]
\pgfpathmoveto{ \pgfpointxy {0.0} {0.0}}
\pgfpathlineto{ \pgfpointxy {0.4} {0.0}}
\pgfpathlineto{ \pgfpointxy {0.4} {0.2}}
\pgfpathlineto{ \pgfpointxy {0.0} {0.2}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\end{scope}
\end{tikzpicture}
 Histogram 1, \begin{tikzpicture}[]
\draw[red!80,thick] (0.0,0.1) -- (0.4,0.1);
\draw[opacity=0.0,white] (0.0,0.2) -- (0.0,0.0);
\end{tikzpicture}
 Histogram 2, \begin{tikzpicture}[]
\begin{scope}[draw=black,fill=green]
\pgfpathmoveto{ \pgfpointxy {0.0} {0.0}}
\pgfpathlineto{ \pgfpointxy {0.4} {0.0}}
\pgfpathlineto{ \pgfpointxy {0.4} {0.2}}
\pgfpathlineto{ \pgfpointxy {0.0} {0.2}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\end{scope}
\end{tikzpicture}
 Histogram 3.}
\end{figure}


Simple sparkline: \begin{tikzpicture}[]
\begin{scope}[gray]
\begin{scope}[]
\pgfpathmoveto{ \pgfpointadd{\pgfpointxy {0.0} {0.0}} {\pgfpoint{0cm}{0cm}} }
\pgfpathlineto{ \pgfpointadd{\pgfpointxy {0.0} {0.0}} {\pgfpoint{3cm}{0cm}} }
\pgfpathlineto{ \pgfpointadd{\pgfpointxy {0.0} {0.0}} {\pgfpoint{3cm}{0.3cm}} }
\pgfpathlineto{ \pgfpointadd{\pgfpointxy {0.0} {0.0}} {\pgfpoint{0cm}{0.3cm}} }
\pgfpathclose
\pgfusepath{  clip, }
\begin{scope}[shift={(0.0,0.0)}]
\pgfsetxvec{\pgfpoint{0.6cm}{0cm}}
\pgfsetyvec{\pgfpoint{0cm}{0.003cm}}
\begin{scope}[shift={(0.0,0.0)}]
\pgfpathmoveto{ \pgfpointxy {0.024999999999999994} {0.0}}
\pgfpathlineto{ \pgfpointxy {0.225} {0.0}}
\pgfpathlineto{ \pgfpointxy {0.225} {5.0}}
\pgfpathlineto{ \pgfpointxy {0.024999999999999994} {5.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {0.275} {0.0}}
\pgfpathlineto{ \pgfpointxy {0.475} {0.0}}
\pgfpathlineto{ \pgfpointxy {0.475} {4.0}}
\pgfpathlineto{ \pgfpointxy {0.275} {4.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {0.525} {0.0}}
\pgfpathlineto{ \pgfpointxy {0.725} {0.0}}
\pgfpathlineto{ \pgfpointxy {0.725} {7.0}}
\pgfpathlineto{ \pgfpointxy {0.525} {7.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {0.775} {0.0}}
\pgfpathlineto{ \pgfpointxy {0.975} {0.0}}
\pgfpathlineto{ \pgfpointxy {0.975} {10.0}}
\pgfpathlineto{ \pgfpointxy {0.775} {10.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {1.025} {0.0}}
\pgfpathlineto{ \pgfpointxy {1.225} {0.0}}
\pgfpathlineto{ \pgfpointxy {1.225} {16.0}}
\pgfpathlineto{ \pgfpointxy {1.025} {16.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {1.275} {0.0}}
\pgfpathlineto{ \pgfpointxy {1.475} {0.0}}
\pgfpathlineto{ \pgfpointxy {1.475} {17.0}}
\pgfpathlineto{ \pgfpointxy {1.275} {17.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {1.525} {0.0}}
\pgfpathlineto{ \pgfpointxy {1.725} {0.0}}
\pgfpathlineto{ \pgfpointxy {1.725} {19.0}}
\pgfpathlineto{ \pgfpointxy {1.525} {19.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {1.775} {0.0}}
\pgfpathlineto{ \pgfpointxy {1.975} {0.0}}
\pgfpathlineto{ \pgfpointxy {1.975} {23.0}}
\pgfpathlineto{ \pgfpointxy {1.775} {23.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {2.025} {0.0}}
\pgfpathlineto{ \pgfpointxy {2.225} {0.0}}
\pgfpathlineto{ \pgfpointxy {2.225} {35.0}}
\pgfpathlineto{ \pgfpointxy {2.025} {35.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {2.275} {0.0}}
\pgfpathlineto{ \pgfpointxy {2.475} {0.0}}
\pgfpathlineto{ \pgfpointxy {2.475} {29.0}}
\pgfpathlineto{ \pgfpointxy {2.275} {29.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {2.525} {0.0}}
\pgfpathlineto{ \pgfpointxy {2.725} {0.0}}
\pgfpathlineto{ \pgfpointxy {2.725} {35.0}}
\pgfpathlineto{ \pgfpointxy {2.525} {35.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {2.775} {0.0}}
\pgfpathlineto{ \pgfpointxy {2.975} {0.0}}
\pgfpathlineto{ \pgfpointxy {2.975} {39.0}}
\pgfpathlineto{ \pgfpointxy {2.775} {39.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {3.025} {0.0}}
\pgfpathlineto{ \pgfpointxy {3.225} {0.0}}
\pgfpathlineto{ \pgfpointxy {3.225} {40.0}}
\pgfpathlineto{ \pgfpointxy {3.025} {40.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {3.275} {0.0}}
\pgfpathlineto{ \pgfpointxy {3.475} {0.0}}
\pgfpathlineto{ \pgfpointxy {3.475} {33.0}}
\pgfpathlineto{ \pgfpointxy {3.275} {33.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {3.525} {0.0}}
\pgfpathlineto{ \pgfpointxy {3.725} {0.0}}
\pgfpathlineto{ \pgfpointxy {3.725} {52.0}}
\pgfpathlineto{ \pgfpointxy {3.525} {52.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {3.775} {0.0}}
\pgfpathlineto{ \pgfpointxy {3.975} {0.0}}
\pgfpathlineto{ \pgfpointxy {3.975} {43.0}}
\pgfpathlineto{ \pgfpointxy {3.775} {43.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {4.025} {0.0}}
\pgfpathlineto{ \pgfpointxy {4.225} {0.0}}
\pgfpathlineto{ \pgfpointxy {4.225} {49.0}}
\pgfpathlineto{ \pgfpointxy {4.025} {49.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {4.275} {0.0}}
\pgfpathlineto{ \pgfpointxy {4.475} {0.0}}
\pgfpathlineto{ \pgfpointxy {4.475} {54.0}}
\pgfpathlineto{ \pgfpointxy {4.275} {54.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {4.525} {0.0}}
\pgfpathlineto{ \pgfpointxy {4.725} {0.0}}
\pgfpathlineto{ \pgfpointxy {4.725} {49.0}}
\pgfpathlineto{ \pgfpointxy {4.525} {49.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\pgfpathmoveto{ \pgfpointxy {4.775} {0.0}}
\pgfpathlineto{ \pgfpointxy {4.975} {0.0}}
\pgfpathlineto{ \pgfpointxy {4.975} {38.0}}
\pgfpathlineto{ \pgfpointxy {4.775} {38.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\end{scope}
\end{scope}
\pgfsetxvec{\pgfpoint{1cm}{0cm}}
\pgfsetyvec{\pgfpoint{0cm}{1cm}}
\end{scope}
\end{scope}
\end{tikzpicture}




More complex sparkline: \begin{tikzpicture}[]
\begin{scope}[]
\pgfpathmoveto{ \pgfpointadd{\pgfpointxy {0.0} {0.0}} {\pgfpoint{0cm}{0cm}} }
\pgfpathlineto{ \pgfpointadd{\pgfpointxy {0.0} {0.0}} {\pgfpoint{3cm}{0cm}} }
\pgfpathlineto{ \pgfpointadd{\pgfpointxy {0.0} {0.0}} {\pgfpoint{3cm}{0.4cm}} }
\pgfpathlineto{ \pgfpointadd{\pgfpointxy {0.0} {0.0}} {\pgfpoint{0cm}{0.4cm}} }
\pgfpathclose
\pgfusepath{  clip, }
\begin{scope}[shift={(0.0,0.0)}]
\pgfsetxvec{\pgfpoint{0.30303030303030304cm}{0cm}}
\pgfsetyvec{\pgfpoint{0cm}{0.06666666666666667cm}}
\begin{scope}[shift={(-0.1,3.0)}]
\begin{scope}[gray!30]
\pgfpathmoveto{ \pgfpointxy {0.0} {-1.0}}
\pgfpathlineto{ \pgfpointxy {10.0} {-1.0}}
\pgfpathlineto{ \pgfpointxy {10.0} {1.0}}
\pgfpathlineto{ \pgfpointxy {0.0} {1.0}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\end{scope}
\end{scope}
\end{scope}
\pgfsetxvec{\pgfpoint{1cm}{0cm}}
\pgfsetyvec{\pgfpoint{0cm}{1cm}}
\end{scope}
\begin{scope}[]
\pgfpathmoveto{ \pgfpointadd{\pgfpointxy {0.0} {0.0}} {\pgfpoint{0cm}{0cm}} }
\pgfpathlineto{ \pgfpointadd{\pgfpointxy {0.0} {0.0}} {\pgfpoint{3cm}{0cm}} }
\pgfpathlineto{ \pgfpointadd{\pgfpointxy {0.0} {0.0}} {\pgfpoint{3cm}{0.4cm}} }
\pgfpathlineto{ \pgfpointadd{\pgfpointxy {0.0} {0.0}} {\pgfpoint{0cm}{0.4cm}} }
\pgfpathclose
\pgfusepath{  clip, }
\begin{scope}[shift={(0.0,0.0)}]
\pgfsetxvec{\pgfpoint{0.30303030303030304cm}{0cm}}
\pgfsetyvec{\pgfpoint{0cm}{0.06666666666666667cm}}
\begin{scope}[shift={(-0.1,3.0)}]
\begin{scope}[black]
\pgfpathmoveto{ \pgfpointxy {10.0} {0.0}}
\pgfpathlineto{ \pgfpointxy {10.0} {1.253855398495456}}
\pgfpathlineto{ \pgfpointxy {10.0} {1.253855398495456}}
\pgfpathlineto{ \pgfpointxy {9.5} {1.253855398495456}}
\pgfpathlineto{ \pgfpointxy {9.5} {1.3935558894612532}}
\pgfpathlineto{ \pgfpointxy {9.0} {1.3935558894612532}}
\pgfpathlineto{ \pgfpointxy {9.0} {-0.29092694347432335}}
\pgfpathlineto{ \pgfpointxy {8.5} {-0.29092694347432335}}
\pgfpathlineto{ \pgfpointxy {8.5} {0.6040037137628566}}
\pgfpathlineto{ \pgfpointxy {8.0} {0.6040037137628566}}
\pgfpathlineto{ \pgfpointxy {8.0} {-1.3475786946109425}}
\pgfpathlineto{ \pgfpointxy {7.5} {-1.3475786946109425}}
\pgfpathlineto{ \pgfpointxy {7.5} {2.3112766845253336}}
\pgfpathlineto{ \pgfpointxy {7.0} {2.3112766845253336}}
\pgfpathlineto{ \pgfpointxy {7.0} {-0.06016709638294648}}
\pgfpathlineto{ \pgfpointxy {6.5} {-0.06016709638294648}}
\pgfpathlineto{ \pgfpointxy {6.5} {-1.0301551489524876}}
\pgfpathlineto{ \pgfpointxy {6.0} {-1.0301551489524876}}
\pgfpathlineto{ \pgfpointxy {6.0} {0.3283808483918907}}
\pgfpathlineto{ \pgfpointxy {5.5} {0.3283808483918907}}
\pgfpathlineto{ \pgfpointxy {5.5} {0.19451940303075513}}
\pgfpathlineto{ \pgfpointxy {5.0} {0.19451940303075513}}
\pgfpathlineto{ \pgfpointxy {5.0} {-0.4649275118245872}}
\pgfpathlineto{ \pgfpointxy {4.5} {-0.4649275118245872}}
\pgfpathlineto{ \pgfpointxy {4.5} {-0.63055774675851}}
\pgfpathlineto{ \pgfpointxy {4.0} {-0.63055774675851}}
\pgfpathlineto{ \pgfpointxy {4.0} {0.6673215104817147}}
\pgfpathlineto{ \pgfpointxy {3.5} {0.6673215104817147}}
\pgfpathlineto{ \pgfpointxy {3.5} {0.9871284132029172}}
\pgfpathlineto{ \pgfpointxy {3.0} {0.9871284132029172}}
\pgfpathlineto{ \pgfpointxy {3.0} {4.195888270716913}}
\pgfpathlineto{ \pgfpointxy {2.5} {4.195888270716913}}
\pgfpathlineto{ \pgfpointxy {2.5} {0.32072576226707816}}
\pgfpathlineto{ \pgfpointxy {2.0} {0.32072576226707816}}
\pgfpathlineto{ \pgfpointxy {2.0} {0.13737549944571265}}
\pgfpathlineto{ \pgfpointxy {1.5} {0.13737549944571265}}
\pgfpathlineto{ \pgfpointxy {1.5} {1.175077950770012}}
\pgfpathlineto{ \pgfpointxy {1.0} {1.175077950770012}}
\pgfpathlineto{ \pgfpointxy {1.0} {-0.5770688333425408}}
\pgfpathlineto{ \pgfpointxy {0.5} {-0.5770688333425408}}
\pgfpathlineto{ \pgfpointxy {0.5} {-0.4000928378533561}}
\pgfpathlineto{ \pgfpointxy {0.0} {-0.4000928378533561}}
\pgfpathlineto{ \pgfpointxy {0.0} {0.0}}
\pgfusepath{ stroke, }
\end{scope}
\end{scope}
\end{scope}
\pgfsetxvec{\pgfpoint{1cm}{0cm}}
\pgfsetyvec{\pgfpoint{0cm}{1cm}}
\end{scope}
\begin{scope}[shift={(0.0,0.0)}]
\pgfsetxvec{\pgfpoint{0.30303030303030304cm}{0cm}}
\pgfsetyvec{\pgfpoint{0cm}{0.06666666666666667cm}}
\begin{scope}[shift={(-0.1,3.0)}]
\node at (10.0,1.253855398495456) [red,fill=red,rectangle,inner sep=0.0pt,minimum width =2.0pt,minimum height=2.0pt] {};
\end{scope}
\end{scope}
\pgfsetxvec{\pgfpoint{1cm}{0cm}}
\pgfsetyvec{\pgfpoint{0cm}{1cm}}
\end{tikzpicture}
 \textcolor{red}{ 1.3}, \begin{tikzpicture}[]
\begin{scope}[draw=gray!30,fill=gray!30]
\pgfpathmoveto{ \pgfpointxy {0.0} {0.0}}
\pgfpathlineto{ \pgfpointxy {0.4} {0.0}}
\pgfpathlineto{ \pgfpointxy {0.4} {0.2}}
\pgfpathlineto{ \pgfpointxy {0.0} {0.2}}
\pgfpathclose
\pgfusepath{ stroke, fill, }
\end{scope}
\end{tikzpicture}
 indicates the $1 \sigma$ band

\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/test-histo3.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Histogram with bins extending in the horizontal direction. 
This is just a tikzpicture with the transformation rotate=-90. The text is not rotated, so axis ticks
require extra care, and text in legend entries will not be properly aligned.
The bins are named with the draw-axis-ticks function.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/functions.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Plotting sin(x) and cos(x), with grid lines and tick names on the x-axis.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/gaussian-distribution.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Gaussian function, made by closing, drawing and filling function segments.}
\end{figure}
\section{Fitting with Levenberg-Mmarquart}


The Levenberg-Marquart algorithm minimizes the squared distance in the y-direction
between a function and a set of data points by changing function parameters. 
If errors are supplied the $\chi^2$, or the squared normalized differences, is minimized.

\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/test-fitter.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Some Gauss smeared data points, fitted with the Gaussian function. Fit parameters are printed in the plot. 
A spline fit is also plotted.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/test-fitter2.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Same as above, except the data points have errors. The error bars are calculated from bin content.
Empty bins are discarded in the fit.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/test-fitter3.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Noisy data points, with known errors, fitted with a polynomial of the third degree. 
The ''Simulated parameter'' legend is placed in the default frame, the ''Fitted parameters'' 
in the data frame.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/spline.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Cubic splines, with different end point conditions.}
\end{figure}
\section{Sub figures}


The with-sub-figure macro makes it possible to draw with a new set of transformations
within the same tikz figure. In addition to the with-tikz-to-stream arguments, the sub-figure also
expects the offset from (0,0) in the default cm frame.

\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/sub-fig.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{More than one plot can be plotted in the same figure by using sub figures.
Sub figures are basically a new set of transformations, and do not affect the default cm frame at all.
Here is a function with a zoomed view of a region of interest.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/sub-histo.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Horizontal histograms, in sub figures side by side. The mean and $\sigma$ are indicated by red verical bars.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/bubbles2.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Two data sets with different transformations are plotted on top of ech other.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/log-scale.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Plot with log scale in the y direction. Explicit transformation.}
\end{figure}
\section{2D histograms}


2D representations of 2D histograms.

\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/histo-rect.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{2D histogram drawn as filled rectangles. Takes a while to compile with pdflatex, 
especially if the binning is fine.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/histo-cont.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{2D histogram drawn as filled contour regions. The points making up the contour lines 
are just linear interpolation between neighbors on either side of the contour height.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/histo-opacity.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{2D histogram drawn as filled contour regions, with varying opacity.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/histo-nodes.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{2D histograms drawn as nodes of varying sizes.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/histo-cont2.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{2D histogram drawn as filled contour regions, not using rainbow colors, and using
non uniformly distributed tick marks. Showing how to manipulate axes and colors.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/velocity-field2.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Velocity field with streamlines as parametrized functions.}
\end{figure}
\section{3D scalar fields}


3D histograms can be visualized by projecting 3D scalar data into a 2D
histogram in a projection plane. The camera is pointed towards a reference point. The
projection has a horizontal axis parallel to the cross product of the difference vector
between the camera and the reference point, and the z-axis. The vertical axis is parallel to
the cross product between the difference and the horizontal axis. The hight and width of the
projection is measured along the axes around the reference point. Rays are emitted from the
bins in the projection plane, moving away from the camera. The distance from the camera to
the projection plane is specified in units of the distance from the camera to the
reference. The reference point is only in the projection plane if this distance in 1. If the
projection plane is inside the 3D scalar field, only data further away from the camera will
be used in the visualization.

Three projection methods are implemented. The first method uses a line integral along the
ray emitting from the projection bin.



\includegraphics{/home/haavagj/src/tikz-helper/example/head3.pdf}
\includegraphics{/home/haavagj/src/tikz-helper/example/head2.pdf}
\includegraphics{/home/haavagj/src/tikz-helper/example/head1.pdf}



The second method is the Maximum Intensity Projection (MIP). The maximum
value the ray passes through is used.



\includegraphics{/home/haavagj/src/tikz-helper/example/head3-mip.pdf}
\includegraphics{/home/haavagj/src/tikz-helper/example/head2-mip.pdf}
\includegraphics{/home/haavagj/src/tikz-helper/example/head1-mip.pdf}



The third method is the Local Maximum Intensity Projection (LMIP). This is
similar to MIP, but the first value above a threshold passed by each ray is returned. If the
treshold is set very low, the projection plane can be studied as a cut plane.



\includegraphics{/home/haavagj/src/tikz-helper/example/head3-lmip.pdf}
\includegraphics{/home/haavagj/src/tikz-helper/example/head2-lmip.pdf}
\includegraphics{/home/haavagj/src/tikz-helper/example/head1-lmip.pdf}

\end{document}
