%%% AUTO GENERATED CODE
\documentclass{article}
\usepackage{standalone}
\ifx\HCode\UnDef\else\def\pgfsysdriver{pgfsys-tex4ht.def}\fi
\usepackage[usenames,dvipsnames,svgnames,table]{xcolor}
\usepackage{tikz}
\usepackage{color}
\usepackage{siunitx}
\usetikzlibrary{arrows,shapes}
\usepackage{float}
\usepackage[singlelinecheck=off]{caption}
\begin{document}
\section{Introduction}
tikz-helper is a set of common lisp functions and macros to make plots. This is done by 
generating \LaTeX \ code using pgf and {Ti\textit{k}Z}.

To generate a plot, one of the macros with-tikz-to-file, with-tikz-to-string or with-tikz-to-stream is called.
with-tikz-to-file and with-tikz-to-string are just wrappers for with-tikz-to-stream.
The macros set up the latex environment needed by the figures, collects information needed to perform 
transformations between the data frame and a default frame, and draws axis for the plot. The transformations are
linear and works so that (plot-x-min,plot-y-min) is at (0cm,0cm) in the default frame, and  (plot-x-max,plot-x-min) is at (width cm, height cm)

The axis-style should be one of :rectangle :cross :left-bottom :popped-out or :none.
Examples of all the different axis styles are below. Axis ticks are added to the axis. The position of the ticks is so
that they are placed with a spacing of 1,2 or 5 times 10 to a power such that you get between 4 and 10 ticks on the 
axis. If custom ticks are needed, or ticks with names, not numbers, use :none, and call the corresponding draw-axis-*
function.

\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/transform-and-clip.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{By default paths and nodes are drawn in a frame where origin is the lower left corner of the plot,
and the units in x and y is 1cm. The transform macro generates tikz transformations, so that all points
within the scope are drawn in the plot frame, defined by plot- x-min x-max and y-min y-max.
 The clip-and-transform macro also clips the plotting area. Sizes with units like cm or pt are not scaled, 
only translated.}
\end{figure}
\section{Simple plots}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/plots.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{A histogram, a function and some datapoints. Most functions 
dealing with sets of data points call the clip-and-transform macro themselves, so calling it from 
top level is not necessary.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/test-styles.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Different styles of lines and nodes. The styles are just regular tikz options.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/bubbles.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Data points of varying sizes, shapes and colors. Draw node does not automatically transform, 
since it can be useful in the default frame.}
\end{figure}
It's possible to draw nodes in captions. 
\begin{verbatim}
%The preamble needs:
\usepackage[singlelinecheck=off]{caption}
%Inside the figure environment
\captionsetup{singlelinecheck=off}
\caption[foo bar]{\node at (0,0) ...}
\end{verbatim}

\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/test-histo2.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Some Gaussian histograms with different styles and with legend entries. 
The legend entries are placed in the default cm frame, unless draw-histogram 
is called within (transform (tikz) ...). With some trickery it is also possible to get 
legends in captions: \begin{tikzpicture}
\node at (0.2,0.1) [draw=gray,fill=blue!50,rectangle,inner sep=0.0cm,minimum width =0.4cm,minimum height=0.2cm] {};
\end{tikzpicture}
 Histogram 1, \begin{tikzpicture}
\draw[red!80,thick] (0.0,0.1) -- (0.4,0.1);
\draw[opacity=0.0,white] (0.0,0.2) -- (0.0,0.0);
\end{tikzpicture}
 Hisogram 2, \begin{tikzpicture}
\node at (0.2,0.1) [fill=green,rectangle,inner sep=0.0cm,minimum width =0.4cm,minimum height=0.2cm] {};
\end{tikzpicture}
 Hisogram 3.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/test-histo1.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Histogram with bins extending in the horizontal direction. 
The bins are named with the draw-axis-ticks function.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/functions.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Plotting sin(x) and cos(x), with grid lines and tick names on the x-axis.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/gaussian-distribution.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Gaussian function, made by drawing and filling function segments.}
\end{figure}
\section{Fitting with levenberg marquart}
The Levenberg-Marquart algorithm minimizes the squared distance in the y-direction
between a function and a set of datapoints by manipulating function parameters. 
If errors are supplied the $\chi^2$, or the normalized differences, is minimized.

\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/test-fitter.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Some Gauss smeared data points, fitted with the Gaussian function. Fit parameters are printed in the plot. 
A spline fit is also plotted.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/test-fitter2.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Same as above, except the data points have errors. The error bars are calculated from bin content.
Empty bins are discarded in the fit.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/test-fitter3.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Noisy data points, with known errors, fitted with a polynomial of the third degree. 
The ''Simulated parameter'' legend is placed in the default frame, the ''Fitted parameters'' 
in the data frame.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/spline.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Cubic splines, with different end point conditions.}
\end{figure}
\section{Sub figures}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/sub-fig.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{More than one plot can be plotted in the same figure by using sub figures.
Sub figures are basically a new set of transformations, and do not affect the default cm frame at all.
Here is a function with a zoomed view of a region of interest.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/sub-histo.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Horizontal histograms, in sub figures side by side. The mean and $\sigma$ are indicated in red.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/bubbles2.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Two data sets with different transformations are plotted on top of ech other.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/log-scale.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{Plot with log scale in the y direction. Explicit transformation.}
\end{figure}
\section{2D histograms}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/histo-rect.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{2D histogram drawn as filled rectangles. Takes a while to compile with pdflatex, 
especially if the binning is fine.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/histo-cont.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{2D histogram drawn as filled contour regions. The points making up the contour lines 
are just linear interpolation between neighbors on either side of the contour height.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/histo-rect-cont.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{2D histogram drawn as filled rectangles with contour lines.}
\end{figure}
\begin{figure}[H]
\centering
\input{/home/haavagj/src/tikz-helper/example/histo-cont2.tex}
\captionsetup{singlelinecheck=off}
\caption[asdf]{2D histogram drawn as filled contour regions, not using rainbow colors, and using
non uniformly distributed tick marks.}
\end{figure}
\end{document}
